<!DOCTYPE html>
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<html>
<style>

    /* Initialize standard disk */
    #std {
        width: 500px;
        height: 500px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: black;
        border-radius: 50%;
    }

    /* Initialize oddball */
    #oddBall {
        width: 1px;
        height: 1px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: black;
        border-radius: 50%;
    }
</style>
<body>
    <div id="std"></div>
    <div id="oddBall"></div>
    <br>
    <br>
    <br>
    <script>

        // Initialize a blank screen
        $('#std').hide();
        $('#oddBall').hide();

        // Standard disk duration
        var stdDelay = 1050;

        // Randomized oddball disk duration array and Knuth shuffle
        function shuffle(array) {
          var currentIndex = array.length, temporaryValue, randomIndex;
          while (0 !== currentIndex) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
          }
          return array;
        }


          function cycles() {
            while (sixCycles > 0) {
              if (indexCount < 8) {
                arr = shuffle(arr);
              sixCycles -= 1;
              }
            }
          }

        // Randomized standard disk frequency (6 < disk freq. < 13)
        var counter = (Math.floor(Math.random() * (13 - 7)) + 7) * 2;
        var oddBallCounter = 2;
        var toggleBall = function() {
            var delay = Math.floor(Math.random() * (1050-950)) + 950;
            $('#std').toggle();
            if (counter > 0) {
                console.log("std counter: ",counter);
                counter -= 1;
                if (counter % 2 == 0 && counter > 0) {
                    setTimeout(toggleBall, stdDelay);
                } else {
                    setTimeout(toggleBall, delay);
                }
            } else {
                $('#std').hide();
                $('#oddBall').hide();
                setTimeout(animateOddball, 0);
            }
        }

        // Randomized oddball duration
        var animateOddBall = function() {
            var delay = Math.floor(Math.random() * (1050 - 950) + 950);
            var indexCount = 0;
            var sixCycles = 6;
            var arr = [450, 525, 600, 675, 750, 825, 900, 975, 1050];
            for cycle in range(6) {
              shuffle(arr);
              for duration in range(len(arr)) {
                var dur = arr[duration];
                $('#oddBall').animate({height: '+=499px', width: '+=499px'}, dur, 'linear');
                $('#oddBall').hide(0,'linear');
                oddBallCounter -= 1;
                setTimeout(animateOddBall, arr[indexCount]);
              }
            }
            if (oddBallCounter > 0) {
                console.log("oddBall counter: ",oddBallCounter);
                if (oddBallCounter % 2 == 0 && oddBallCounter > 0) {
                } else {
                    $('#oddBall').toggle();
                    oddBallCounter -= 1;
                    setTimeout(animateOddBall, delay);
                }
            } else {
                $('#oddBall').hide();
                $('#std').hide();
                window.counter = (Math.floor(Math.random() * (13 - 7)) + 7) * 2;
                window.oddBallCounter = 2;
                setTimeout(toggleBall, 0);
            }
        }
        setTimeout(toggleBall, 0);

    </script>
</body>
</html>
